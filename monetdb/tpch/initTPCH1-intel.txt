-- Load data
COPY 5 records INTO region FROM '/mnt/local/tpch-tbl/db1/region.tbl' using DELIMITERS '|';
COPY INTO customer FROM '/mnt/local/tpch-tbl/db1/customer.tbl' using DELIMITERS '|';
COPY INTO lineitem FROM '/mnt/local/tpch-tbl/db1/lineitem.tbl' using DELIMITERS '|';
COPY INTO nation FROM '/mnt/local/tpch-tbl/db1/nation.tbl' using DELIMITERS '|';
COPY INTO orders FROM '/mnt/local/tpch-tbl/db1/orders.tbl' using DELIMITERS '|';
COPY INTO partsupp FROM '/mnt/local/tpch-tbl/db1/partsupp.tbl' using DELIMITERS '|';
COPY INTO part FROM '/mnt/local/tpch-tbl/db1/part.tbl' using DELIMITERS '|';
COPY INTO supplier FROM '/mnt/local/tpch-tbl/db1/supplier.tbl' using DELIMITERS '|';

-- Add primary keys
ALTER TABLE REGION ADD PRIMARY KEY (R_REGIONKEY);
ALTER TABLE NATION ADD PRIMARY KEY (N_NATIONKEY);
ALTER TABLE PART ADD PRIMARY KEY (P_PARTKEY);
ALTER TABLE SUPPLIER ADD PRIMARY KEY (S_SUPPKEY);
ALTER TABLE PARTSUPP ADD PRIMARY KEY (PS_PARTKEY,PS_SUPPKEY);
ALTER TABLE CUSTOMER ADD PRIMARY KEY (C_CUSTKEY);
ALTER TABLE LINEITEM ADD PRIMARY KEY (L_ORDERKEY,L_LINENUMBER);
ALTER TABLE ORDERS ADD PRIMARY KEY (O_ORDERKEY);

-- Add foreign keys
ALTER TABLE NATION ADD FOREIGN KEY  (N_REGIONKEY) references REGION(R_REGIONKEY);
ALTER TABLE  SUPPLIER ADD FOREIGN KEY (S_NATIONKEY) references  NATION(N_NATIONKEY);
ALTER TABLE  CUSTOMER ADD FOREIGN KEY (C_NATIONKEY) references  NATION(N_NATIONKEY);
ALTER TABLE  PARTSUPP ADD FOREIGN KEY (PS_SUPPKEY) references  SUPPLIER(S_SUPPKEY);
ALTER TABLE  PARTSUPP ADD FOREIGN KEY (PS_PARTKEY) references  PART(P_PARTKEY);
ALTER TABLE  ORDERS ADD FOREIGN KEY (O_CUSTKEY) references  CUSTOMER(C_CUSTKEY);
ALTER TABLE  LINEITEM ADD FOREIGN KEY (L_ORDERKEY)  references  ORDERS(O_ORDERKEY);
ALTER TABLE  LINEITEM ADD FOREIGN KEY (L_PARTKEY,L_SUPPKEY) references PARTSUPP(PS_PARTKEY, PS_SUPPKEY);
